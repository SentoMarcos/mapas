<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Museo Sonoro ¬∑ Instrumentos de viento</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="estilos-mapas.css" />
  <script src="scripts/audio-player.js" defer></script>
  <script src="scripts/timeline.js" defer></script>
</head>

<body class="theme-viento">
  <header class="page-hero">
    <nav class="site-nav" aria-label="Navegaci√≥n principal">
      <a class="brand-mark" href="index.html">Museo Sonoro</a>
      <div class="nav-links">
        <a href="cuerda.html">Cuerda</a>
        <a href="percusion.html">Percusi√≥n</a>
        <a href="viento.html" class="is-active">Viento</a>
        <a href="produccion.html">Producci√≥n</a>
        <a href="direccion.html">Direcci√≥n</a>
      </div>
    </nav>

    <div class="hero-grid">
      <div class="hero-text">
        <p class="hero-label">Atlas sonoro global</p>
        <h1>Instrumentos de viento</h1>
        <p class="hero-copy">Vive el viaje de las columnas de aire: de flautas paleol√≠ticas a metales sinf√≥nicos y solos de jazz que han guiado rituales, batallas y escenas urbanas.</p>

        <div class="hero-meta">
          <div>
            <span>Eras curadas</span>
            <strong>11 hitos</strong>
          </div>
          <div>
            <span>Corrientes</span>
            <strong>6 rutas</strong>
          </div>
          <div>
            <span>Instrumentos</span>
            <strong>18 figuras</strong>
          </div>
        </div>

        <div class="hero-actions">
          <a class="btn-primary" href="#linea-viento">Recorrer l√≠nea</a>
          <a class="btn-ghost" href="#mapa-viento">Ver mapa</a>
        </div>
      </div>

      <div class="hero-visual">
        <h3>Aire en movimiento</h3>
        <p>Ca√±as dobles, flautas de borde y metales brillantes definen timbres que narran ceremonias y revoluciones.</p>

        <div class="hero-timeline-blip">
          <article>
            <span>Rito</span>
            <strong>Quenas y shaku</strong>
            <p>Respiraci√≥n circular para conectar con la monta√±a y el bosque.</p>
          </article>
          <article>
            <span>Corte</span>
            <strong>Oboes y cornetas</strong>
            <p>Marcan protocolos militares y ceremoniales europeos.</p>
          </article>
          <article>
            <span>Impro</span>
            <strong>Sax &amp; brass</strong>
            <p>El jazz convierte al viento en manifiesto urbano.</p>
          </article>
        </div>

        <ul class="hero-taglist" aria-label="Instrumentos destacados">
          <li>Quena</li>
          <li>Shakuhachi</li>
          <li>Oboe</li>
          <li>Saxof√≥n</li>
          <li>Didgeridoo</li>
        </ul>
      </div>
    </div>
  </header>

  <main class="page-content">
    <section class="panel-card timeline-panel" id="linea-viento">
      <div class="panel-inner">
        <div class="section-heading">
          <span class="section-kicker">Historia viva</span>
          <h2>L√≠nea del tiempo de los instrumentos de viento</h2>
          <p>Una panor√°mica de flautas, ca√±as y metales que han guiado ritos, guerras y conciertos.</p>
        </div>

        <div class="timeline" aria-label="L√≠nea del tiempo interactiva">
          <button class="timeline-reset" type="button" aria-label="Volver al inicio">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 5v14M5 12l7-7 7 7" />
            </svg>
          </button>
          <div class="timeline-track">
      <svg class="timeline-curve" viewBox="0 0 1200 320" preserveAspectRatio="none" aria-hidden="true">
        <defs>
          <linearGradient id="timelineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#f4a261" />
            <stop offset="25%" stop-color="#2a9d8f" />
            <stop offset="50%" stop-color="#457b9d" />
            <stop offset="75%" stop-color="#e76f51" />
            <stop offset="100%" stop-color="#9b5de5" />
          </linearGradient>
        </defs>
        <path d="M0,220 C160,120 320,280 480,180 S800,280 960,180 1120,260 1200,220" stroke="url(#timelineGradient)" />
      </svg>

      <div class="timeline-event side-top" style="--pos:4%;" data-progress="0.04">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">40.000 a.C.</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">Prehistoria</span>
        </div>
        <div class="periodo era-ancient">
          <h4>Flautas paleol√≠ticas</h4>
          <ul>
            <li>Flautas de hueso talladas en cuevas europeas.</li>
            <li>Acompa√±an rituales de caza y celebraciones espirituales.</li>
            <li>Los intervalos simples marcan los primeros sistemas tonales.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-bottom" style="--pos:14%;" data-progress="0.14">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">3000 a.C.</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">500 a.C.</span>
        </div>
        <div class="periodo era-ancient">
          <h4>Flautas en civilizaciones cl√°sicas</h4>
          <ul>
            <li>Egipto, Mesopotamia y Grecia desarrollan flautas simples y dobles.</li>
            <li>El aul√≥s acompa√±a tragedias, procesiones y banquetes.</li>
            <li>Los instrumentos se asocian a dioses como Hermes o Ra.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-top" style="--pos:24%;" data-progress="0.24">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">Siglos VIII</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">XIII</span>
        </div>
        <div class="periodo era-medieval">
          <h4>Asia espiritual</h4>
          <ul>
            <li>Shakuhachi japonesa para meditaci√≥n zen.</li>
            <li>Bansuri india asociada al dios Krishna y al bhakti.</li>
            <li>Escuelas mon√°sticas transmiten t√©cnicas de respiraci√≥n.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-bottom" style="--pos:34%;" data-progress="0.34">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">Siglos XV</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">XVIII</span>
        </div>
        <div class="periodo era-renaissance">
          <h4>Renacimiento y Barroco</h4>
          <ul>
            <li>Nace la flauta travesera de madera con llaves rudimentarias.</li>
            <li>Integra cortes, ballets y orquestas de c√°mara.</li>
            <li>Se generan familias de diferentes registros para consort.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-top" style="--pos:44%;" data-progress="0.44">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">Siglos XVIII</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">XIX</span>
        </div>
        <div class="periodo era-classical">
          <h4>Clasicismo y Romanticismo</h4>
          <ul>
            <li>Se perfecciona el sistema de llaves para afinaci√≥n crom√°tica.</li>
            <li>La flauta se convierte en instrumento est√°ndar de la orquesta moderna.</li>
            <li>Virtuosos como Theobald Boehm redise√±an la mec√°nica.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-bottom" style="--pos:54%;" data-progress="0.54">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">Siglos XX</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">XXI</span>
        </div>
        <div class="periodo era-modern">
          <h4>Experimentaci√≥n moderna</h4>
          <ul>
            <li>Flautas en jazz, cine, bandas sinf√≥nicas y m√∫sica contempor√°nea.</li>
            <li>T√©cnicas extendidas: frullato, multif√≥nicos, microtonalidad.</li>
            <li>Fusi√≥n con bansuri, shakuhachi y flautas de pan en escenarios globales.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-top" style="--pos:64%;" data-progress="0.64">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">Aul√≥s</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">Jazz</span>
        </div>
        <div class="periodo era-classical">
          <h4>Ca√±as simples y dobles</h4>
          <ul>
            <li>Del aul√≥s griego a las chirim√≠as medievales.</li>
            <li>Barroco: oboe y fagot se consolidan en cortes europeas.</li>
            <li>Siglo XVIII‚ÄìXIX: nace el clarinete desde el chalumeau; Mozart lo impulsa.</li>
            <li>Siglo XX: clarinete y saxof√≥n lideran big bands.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-bottom" style="--pos:74%;" data-progress="0.74">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">Cuernos</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">Metales</span>
        </div>
        <div class="periodo era-medieval">
          <h4>Metales ceremoniales</h4>
          <ul>
            <li>Antig√ºedad: cornu y salpinx para √≥rdenes militares.</li>
            <li>Edad Media: trompetas naturales en coronaciones.</li>
            <li>Renacimiento y Barroco: trompeta sin pistones, trompa natural.</li>
            <li>Siglo XIX: v√°lvulas y pistones, nace la tuba.</li>
            <li>Siglo XX: trompeta reina en el jazz (Armstrong, Miles).</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-top" style="--pos:84%;" data-progress="0.84">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">1840</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">Actualidad</span>
        </div>
        <div class="periodo era-modern">
          <h4>Saxof√≥n</h4>
          <ul>
            <li>Inventado por Adolphe Sax para puentes entre ca√±as y metales.</li>
            <li>Adoptado por bandas militares y luego por el jazz.</li>
            <li>Solistas como Parker y Coltrane lo llevan al virtuosismo moderno.</li>
          </ul>
        </div>
      </div>

      <div class="timeline-event side-bottom" style="--pos:92%;" data-progress="0.92">
        <div class="timeline-node" tabindex="0">
          <span class="fecha-superior">√ìrgano</span>
          <span class="timeline-node-dot" aria-hidden="true"></span>
          <span class="fecha-inferior">Rituales</span>
        </div>
        <div class="periodo era-renaissance">
          <h4>√ìrganos y sonidos rituales</h4>
          <ul>
            <li>√ìrganos hidr√°ulicos y medievales dan paso a los monumentales de catedrales.</li>
            <li>Shofar, flauta de pan y flautas de Tuv√° mantienen usos lit√∫rgicos.</li>
            <li>El siglo XX populariza estos timbres en grabaciones y giras.</li>
          </ul>
        </div>
      </div>

          </div>
        </div>

        <p class="timeline-hint">üé∫ Despl√°zate horizontalmente o usa la rueda del rat√≥n para seguir la evoluci√≥n del viento.</p>
      </div>
    </section>

    <section class="panel-card map-panel" id="mapa-viento">
      <div class="panel-inner">
        <div class="map-meta">
          <div class="section-heading">
            <span class="section-kicker">Geograf√≠a</span>
            <h2>Mapa de origen y difusi√≥n</h2>
            <p>Sit√∫a los centros rituales, artesanales y urbanos que catapultaron a cada instrumento.</p>
          </div>
          <ul>
            <li>Rutas andinas, asi√°ticas y mediterr√°neas.</li>
            <li>Talleres cortesanos y bandas militares.</li>
            <li>Capitales del jazz y escuelas sinf√≥nicas.</li>
          </ul>
        </div>

        <div id="map" aria-label="Mapa interactivo de viento"></div>
      </div>
    </section>

    <section class="panel-card audio-panel">
      <div class="panel-inner">
        <div class="section-heading">
          <span class="section-kicker">Experiencia museo con guias</span>
          <h2>Escucha a Orfeo</h2>
          <p>Orfeo ser√° el guia que te acompa√±ar√° por el museo interactivo con explicaciones claras y accesibles.</p>
          <p>Aqu√≠ te mostramos un poco lo que nos contar√≠a el dios griego Orfeo sobre los instrumentos de viento y su evoluci√≥n a lo largo de la historia.</p>
        </div>

        <div class="audio-showcase">
          <article class="audio-player">
            <h3>Reproductor</h3>
            <div class="custom-audio" data-track="Orfeo">
              <div class="audio-controls">
                <button class="audio-toggle" type="button" aria-label="Reproducir Orfeo"></button>
                <div class="audio-info">
                  <span class="audio-label">Sesi√≥n</span>
                  <strong>Orfeo</strong>
                  <div class="audio-time">
                    <span class="audio-current">0:00</span>
                    <span class="audio-separator">/</span>
                    <span class="audio-duration">0:00</span>
                  </div>
                </div>
              </div>
              <div class="audio-timeline" role="progressbar" aria-label="Progreso Orfeo" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
                <div class="audio-progress"></div>
              </div>
              <canvas class="audio-wave" width="600" height="140" aria-hidden="true"></canvas>
              <audio preload="metadata">
                <source src="audio/orfeo - viento.wav" type="audio/wav" />
                Tu navegador no soporta audio HTML5.
              </audio>
            </div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="page-footer">
    <p>Mapa interactivo elaborado para el proyecto de historia musical.</p>
  </footer>

    <script>
      (function () {
        function clamp(value, min, max) {
          return Math.min(Math.max(value, min), max);
        }

        function syncTrack(track) {
          var svg = track.querySelector('.timeline-curve');
          if (!svg) return;
          var path = svg.querySelector('path');
          if (!path) return;

          var viewBox = svg.viewBox.baseVal;
          var pathLength = path.getTotalLength();
          var trackRect = track.getBoundingClientRect();
          var svgRect = svg.getBoundingClientRect();
          var offsetX = svgRect.left - trackRect.left;
          var offsetY = svgRect.top - trackRect.top;
          var ratioX = svgRect.width / viewBox.width;
          var ratioY = svgRect.height / viewBox.height;

          track.querySelectorAll('.timeline-event').forEach(function (eventEl) {
            var progressAttr = parseFloat(eventEl.dataset.progress);
            var cssPos = eventEl.style.getPropertyValue('--pos').replace('%', '').trim();
            var fallbackProgress = cssPos ? parseFloat(cssPos) / 100 : 0;
            var progress = clamp(isNaN(progressAttr) ? fallbackProgress : progressAttr, 0, 1);
            var point = path.getPointAtLength(pathLength * progress);

            var relativeX = offsetX + point.x * ratioX;
            var relativeY = offsetY + point.y * ratioY;
            var xPercent = (relativeX / trackRect.width) * 100;
            var yPercent = (relativeY / trackRect.height) * 100;

            eventEl.style.setProperty('--pos', xPercent + '%');
            eventEl.style.setProperty('--node-anchor', yPercent + '%');
          });
        }

        function syncAll() {
          document.querySelectorAll('.timeline-track').forEach(syncTrack);
        }

        function bindWheelScroll() {
          var timelines = document.querySelectorAll('.timeline');
          timelines.forEach(function (timeline) {
            if (timeline.dataset.wheelBound === 'true') return;
            timeline.dataset.wheelBound = 'true';
            timeline.addEventListener(
              'wheel',
              function (evt) {
                if (evt.ctrlKey) return;
                var delta = Math.abs(evt.deltaY) > Math.abs(evt.deltaX) ? evt.deltaY : evt.deltaX;
                if (delta === 0) return;

                var prev = timeline.scrollLeft;
                var maxScroll = timeline.scrollWidth - timeline.clientWidth;
                if (maxScroll <= 0) return;

                var next = Math.min(Math.max(prev + delta, 0), maxScroll);
                timeline.scrollLeft = next;

                if (next !== prev) {
                  evt.preventDefault();
                }
              },
              { passive: false }
            );
          });
        }

        function init() {
          syncAll();
          bindWheelScroll();
        }

        window.addEventListener('resize', syncAll);
        window.addEventListener('load', init);
        init();
      })();
    </script>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([20, 10], 2);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      maxZoom: 18,
      attribution: '¬© OpenStreetMap, ¬© Carto'
    }).addTo(map);

    var puntos = [
      { coords: [31.5, 35], texto: "Shofar ‚Äì Israel antiguo<br>Instrumento ritual solemne." },
      { coords: [30, 31], texto: "Flautas antiguas ‚Äì Egipto<br>Ritos religiosos y funerarios." },
      { coords: [37.9, 23.7], texto: "Aul√≥s ‚Äì Grecia cl√°sica<br>M√∫sica ritual y teatral." },
      { coords: [48.8, 2.3], texto: "√ìrgano de tubos ‚Äì Europa<br>Tradici√≥n cristiana." },
      { coords: [50.85, 4.35], texto: "Saxof√≥n ‚Äì B√©lgica<br>Adolphe Sax." },
      { coords: [28.6, 77.2], texto: "Bansuri ‚Äì India<br>M√∫sica devocional." },
      { coords: [35.6, 139.6], texto: "Shakuhachi ‚Äì Jap√≥n<br>Meditaci√≥n zen." },
      { coords: [45.9, 26.9], texto: "Flauta de pan ‚Äì Ruman√≠a<br>Zamfir." },
      { coords: [51.5, -0.1], texto: "Clarinete y big bands<br>Goodman, Shaw." },
      { coords: [40.7, -74], texto: "Jazz moderno ‚Äì EE.UU.<br>Parker, Coltrane, Davis." },
      { coords: [51.7, 94.4], texto: "Tuv√°<br>Flautas tradicionales." }
    ];

    puntos.forEach(function(p) {
      L.marker(p.coords).addTo(map).bindPopup(p.texto);
    });
  </script>
</body>
</html>

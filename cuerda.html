<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Museo Sonoro ¬∑ Instrumentos de cuerda</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="estilos-mapas.css" />
  <script src="scripts/audio-player.js" defer></script>
</head>

<body class="theme-cuerda">
  <header class="page-hero">
    <nav class="site-nav" aria-label="Navegaci√≥n principal">
      <a class="brand-mark" href="index.html">Museo Sonoro</a>
      <div class="nav-links">
        <a href="cuerda.html" class="is-active">Cuerda</a>
        <a href="percusion.html">Percusi√≥n</a>
        <a href="viento.html">Viento</a>
        <a href="produccion.html">Producci√≥n</a>
        <a href="direccion.html">Direcci√≥n</a>
      </div>
    </nav>

    <div class="hero-grid">
      <div class="hero-text">
        <p class="hero-label">Atlas sonoro global</p>
        <h1>Instrumentos de cuerda</h1>
        <p class="hero-copy">Explora c√≥mo el tejido de cuerdas conect√≥ imperios, religiones y movimientos contempor√°neos: arpas imperiales, la√∫des cortesanos, cuerdas sinf√≥nicas y guitarras el√©ctricas que definieron escenas urbanas.</p>

        <div class="hero-meta">
          <div>
            <span>Hitos curados</span>
            <strong>12 eras</strong>
          </div>
          <div>
            <span>Continentes</span>
            <strong>5 regiones</strong>
          </div>
          <div>
            <span>Instrumentos</span>
            <strong>15+ claves</strong>
          </div>
        </div>

        <div class="hero-actions">
          <a class="btn-primary" href="#linea-cuerda">Recorrer l√≠nea</a>
          <a class="btn-ghost" href="#mapa-cuerda">Ver mapa</a>
        </div>
      </div>

      <div class="hero-visual">
        <h3>Capas resonantes</h3>
        <p>Texturas que van del arco gutural al sustain el√©ctrico. Una s√≠ntesis de estilos que sigue evolucionando.</p>

        <div class="hero-timeline-blip">
          <article>
            <span>Arcaico</span>
            <strong>Arpas sagradas</strong>
            <p>Mesopotamia y Egipto como epicentros rituales.</p>
          </article>
          <article>
            <span>Cl√°sico</span>
            <strong>Orquesta europea</strong>
            <p>Viol√≠n, viola y chelo como lenguaje universal.</p>
          </article>
          <article>
            <span>Contempor√°neo</span>
            <strong>Electricidad</strong>
            <p>Guitarras y bajos redefiniendo g√©neros globales.</p>
          </article>
        </div>

        <ul class="hero-taglist" aria-label="Instrumentos destacados">
          <li>Arpa</li>
          <li>La√∫d</li>
          <li>Viola da gamba</li>
          <li>Koto</li>
          <li>Guitarra el√©ctrica</li>
        </ul>
      </div>
    </div>
  </header>

  <main class="page-content">
    <section class="panel-card timeline-panel" id="linea-cuerda">
      <div class="panel-inner">
        <div class="section-heading">
          <span class="section-kicker">Historia viva</span>
          <h2>L√≠nea del tiempo de los instrumentos de cuerda</h2>
          <p>Recorre hitos musicales y descubre c√≥mo cada cultura aport√≥ nuevas formas, materiales y repertorios.</p>
        </div>

        <div class="timeline" aria-label="L√≠nea del tiempo interactiva">
          <div class="timeline-track">
            <svg class="timeline-curve" viewBox="0 0 1200 400" preserveAspectRatio="none" aria-hidden="true">
              <defs>
                <linearGradient id="timelineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stop-color="#f4a261" />
                  <stop offset="25%" stop-color="#2a9d8f" />
                  <stop offset="50%" stop-color="#457b9d" />
                  <stop offset="75%" stop-color="#e76f51" />
                  <stop offset="100%" stop-color="#9b5de5" />
                </linearGradient>
              </defs>
              <path d="M0,260 C120,60 240,360 360,160 S600,360 720,200 960,360 1080,160 1200,320 1200,220" stroke="url(#timelineGradient)" />
            </svg>

            <div class="timeline-event side-top" style="--pos:4%;" data-progress="0.04">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">3500 a.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">30 a.C.</span>
              </div>
              <div class="periodo era-ancient">
                <h4>3500‚Äì30 a.C. ¬∑ Mesopotamia y Egipto</h4>
                <ul>
                  <li>Aparecen las primeras liras sumerias y arpas egipcias para corte y templos.</li>
                  <li>Cajas de resonancia talladas, cuerdas de tripa y decoraci√≥n simb√≥lica protegen al int√©rprete.</li>
                  <li>Sonido imprescindible en ceremonias funerarias y procesiones devocionales.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-bottom" style="--pos:12%;" data-progress="0.12">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">1200 a.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">146 a.C.</span>
              </div>
              <div class="periodo era-ancient">
                <h4>1200‚Äì146 a.C. ¬∑ Grecia antigua</h4>
                <ul>
                  <li>Lira y kithara asociadas a Apolo lideran ritos, poes√≠a y teatro.</li>
                  <li>La educaci√≥n musical busca armonizar alma, cuerpo y cosmos.</li>
                  <li>Concursos panhel√©nicos difunden repertorios heroicos entre ciudades-estado.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-top" style="--pos:22%;" data-progress="0.22">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">3000 a.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">1000 d.C.</span>
              </div>
              <div class="periodo era-ancient">
                <h4>Edad Antigua y Alta Edad Media</h4>
                <ul>
                  <li>Bardos y poetas conservan la memoria de batallas y linajes con liras port√°tiles.</li>
                  <li>Las cortes tribales exaltan h√©roes y legitiman poder pol√≠tico.</li>
                  <li>La m√∫sica narra hero√≠smo aunque no participa directamente en la batalla.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-bottom" style="--pos:32%;" data-progress="0.32">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">2070 a.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">220 d.C.</span>
              </div>
              <div class="periodo era-ancient">
                <h4>China antigua</h4>
                <ul>
                  <li>Guqin y guzheng protagonizan academias confucianas y corte imperial.</li>
                  <li>Usos: ceremonias militares previas, m√∫sica disciplinaria y cantos de campa√±a.</li>
                  <li>Tablaturas refinadas preservan afinaciones modales y √©tica del int√©rprete.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-top" style="--pos:42%;" data-progress="0.42">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">476 d.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">1492 d.C.</span>
              </div>
              <div class="periodo era-medieval">
                <h4>Europa medieval</h4>
                <ul>
                  <li>Zanfona (hurdy-gurdy), la√∫des primitivos y salterios acompa√±an cantares √©picos.</li>
                  <li>Arpas y salterios sostienen m√∫sica devocional cristiana.</li>
                  <li>Lira n√≥rdica anima sagas islandesas de tradici√≥n vikinga.</li>
                  <li>Trovadores y juglares llevan historias por rutas comerciales y cortes europeas.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-bottom" style="--pos:52%;" data-progress="0.52">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">1400 d.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">1600 d.C.</span>
              </div>
              <div class="periodo era-renaissance">
                <h4>Renacimiento</h4>
                <ul>
                  <li>El la√∫d se convierte en el instrumento estrella de Europa.</li>
                  <li>S√≠mbolo de refinamiento, educaci√≥n y estatus social.</li>
                  <li>Usos: banquetes, poes√≠a, danza, diplomacia y celebraciones cortesanas.</li>
                  <li>Surgen t√©cnicas complejas y notaciones espec√≠ficas.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-top" style="--pos:62%;" data-progress="0.62">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">3000 a.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">1800 d.C.</span>
              </div>
              <div class="periodo era-renaissance">
                <h4>Jap√≥n y Asia oriental</h4>
                <ul>
                  <li><strong>Jap√≥n (corte imperial):</strong> koto y biwa en ceremonias imperiales y m√∫sica gagaku.</li>
                  <li><strong>Teatro Kabuki:</strong> shamisen marca ritmos y refuerza emociones dram√°ticas.</li>
                  <li>Escuelas regionales conservan repertorios cortesanos y populares.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-bottom" style="--pos:72%;" data-progress="0.72">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">1600 d.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">1820 d.C.</span>
              </div>
              <div class="periodo era-classical">
                <h4>Barroco y Clasicismo</h4>
                <ul>
                  <li>Viol√≠n, viola, violonchelo y contrabajo se estandarizan.</li>
                  <li>Amati, Guarneri y Stradivari elevan la luther√≠a italiana.</li>
                  <li>Las cuerdas se vuelven la base de las orquestas cortesanas.</li>
                  <li>Nacen las primeras orquestas modernas permanentes.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-top" style="--pos:82%;" data-progress="0.82">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">476 d.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">Presente</span>
              </div>
              <div class="periodo era-medieval">
                <h4>Cristianismo medieval y moderno</h4>
                <ul>
                  <li>Salterios, arpas y violas protagonizan himnos, misas y procesiones.</li>
                  <li>El arpa se asocia a √°ngeles y figuras b√≠blicas en el arte sacro.</li>
                  <li>Capillas musicales permanentes acompa√±an liturgia y coronaciones.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-bottom" style="--pos:88%;" data-progress="0.88">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">1500 a.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">Presente</span>
              </div>
              <div class="periodo era-ancient">
                <h4>Tradiciones hind√∫es</h4>
                <ul>
                  <li>Veena: asociada a la diosa Saraswati en templos y corte.</li>
                  <li>Sitar: ragas para devoci√≥n, meditaci√≥n y ceremonias bhakti.</li>
                  <li>Los gharanas transmiten t√©cnicas de meend, gamakas y microtonos.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-top" style="--pos:94%;" data-progress="0.94">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">1750 d.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">1900 d.C.</span>
              </div>
              <div class="periodo era-classical">
                <h4>Orquesta cl√°sica y guitarra rom√°ntica</h4>
                <ul>
                  <li>La secci√≥n de cuerda domina por expresividad y versatilidad.</li>
                  <li>T√©cnicas: arco, pizzicato, arm√≥nicos, tr√©molos y glissandi.</li>
                  <li>Guitarra moderna de Antonio de Torres gana proyecci√≥n y equilibrio.</li>
                  <li>La guitarra se populariza como instrumento dom√©stico y de sal√≥n.</li>
                </ul>
              </div>
            </div>

            <div class="timeline-event side-bottom" style="--pos:99%;" data-progress="0.99">
              <div class="timeline-node" tabindex="0">
                <span class="fecha-superior">1900 d.C.</span>
                <span class="timeline-node-dot" aria-hidden="true"></span>
                <span class="fecha-inferior">Presente</span>
              </div>
              <div class="periodo era-modern">
                <h4>Siglo XX ‚Äì XXI</h4>
                <ul>
                  <li>Nacen la guitarra el√©ctrica y el bajo el√©ctrico: rock, jazz, blues, pop, m√∫sica urbana y latina.</li>
                  <li>Violines amplificados protagonizan cine y m√∫sica sinf√≥nica moderna.</li>
                  <li>Fusiones globales integran sitar, koto, ngoni y otros instrumentos tradicionales.</li>
                  <li>La tecnolog√≠a impulsa escenas h√≠bridas y producciones digitales.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <p class="timeline-hint">üìç Usa la rueda del rat√≥n o desliza para recorrer las √©pocas.</p>
      </div>
    </section>

    <section class="panel-card map-panel" id="mapa-cuerda">
      <div class="panel-inner">
        <div class="map-meta">
          <div class="section-heading">
            <span class="section-kicker">Geograf√≠a</span>
            <h2>Mapa de origen y difusi√≥n</h2>
            <p>Visualiza los territorios que dieron forma a los instrumentos emblem√°ticos de cuerda.</p>
          </div>
          <ul>
            <li>Rutas imperiales y cortes religiosas.</li>
            <li>Luther√≠a italiana y escuelas asi√°ticas.</li>
            <li>Escenas urbanas que electrificaron el siglo XX.</li>
          </ul>
        </div>

        <div id="map" aria-label="Mapa interactivo de instrumentos de cuerda"></div>
      </div>
    </section>

    <section class="panel-card audio-panel">
      <div class="panel-inner">
        <div class="section-heading">
          <span class="section-kicker">M√∫sica</span>
          <h2>Escucha Orfeo</h2>
          <p>Pasaje dise√±ado para acompa√±ar la sala de cuerda. Sustituye el archivo en <code>audio/orfeo.mp3</code> para personalizar la experiencia.</p>
        </div>

        <div class="audio-showcase">
          <article class="audio-player">
            <h3>Reproductor</h3>
            <div class="custom-audio" data-track="Orfeo">
              <div class="audio-controls">
                <button class="audio-toggle" type="button" aria-label="Reproducir Orfeo"></button>
                <div class="audio-info">
                  <span class="audio-label">Sesi√≥n</span>
                  <strong>Orfeo</strong>
                  <div class="audio-time">
                    <span class="audio-current">0:00</span>
                    <span class="audio-separator">/</span>
                    <span class="audio-duration">0:00</span>
                  </div>
                </div>
              </div>
              <div class="audio-timeline" role="progressbar" aria-label="Progreso Orfeo" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
                <div class="audio-progress"></div>
              </div>
              <canvas class="audio-wave" width="600" height="140" aria-hidden="true"></canvas>
              <audio preload="metadata">
                <source src="audio/orfeo.mp3" type="audio/mpeg" />
                Tu navegador no soporta audio HTML5.
              </audio>
            </div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="page-footer">
    <p>Mapa interactivo elaborado para el proyecto de historia musical.</p>
  </footer>

  <script>
    (function () {
      function clamp(value, min, max) {
        return Math.min(Math.max(value, min), max);
      }

      function syncTrack(track) {
        var svg = track.querySelector('.timeline-curve');
        if (!svg) return;
        var path = svg.querySelector('path');
        if (!path) return;

        var viewBox = svg.viewBox.baseVal;
        var pathLength = path.getTotalLength();
        var trackRect = track.getBoundingClientRect();
        var svgRect = svg.getBoundingClientRect();
        var offsetX = svgRect.left - trackRect.left;
        var offsetY = svgRect.top - trackRect.top;
        var ratioX = svgRect.width / viewBox.width;
        var ratioY = svgRect.height / viewBox.height;

        track.querySelectorAll('.timeline-event').forEach(function (eventEl) {
          var progressAttr = parseFloat(eventEl.dataset.progress);
          var cssPos = eventEl.style.getPropertyValue('--pos').replace('%', '').trim();
          var fallbackProgress = cssPos ? parseFloat(cssPos) / 100 : 0;
          var progress = clamp(isNaN(progressAttr) ? fallbackProgress : progressAttr, 0, 1);
          var point = path.getPointAtLength(pathLength * progress);

          var relativeX = offsetX + point.x * ratioX;
          var relativeY = offsetY + point.y * ratioY;
          var xPercent = (relativeX / trackRect.width) * 100;
          var yPercent = (relativeY / trackRect.height) * 100;

          eventEl.style.setProperty('--pos', xPercent + '%');
          eventEl.style.setProperty('--node-anchor', yPercent + '%');
        });
      }

      function syncAll() {
        document.querySelectorAll('.timeline-track').forEach(syncTrack);
      }

      function bindWheelScroll() {
        var timelines = document.querySelectorAll('.timeline');
        timelines.forEach(function (timeline) {
          if (timeline.dataset.wheelBound === 'true') return;
          timeline.dataset.wheelBound = 'true';
          timeline.addEventListener(
            'wheel',
            function (evt) {
              if (evt.ctrlKey) return;
              var delta = Math.abs(evt.deltaY) > Math.abs(evt.deltaX) ? evt.deltaY : evt.deltaX;
              if (delta === 0) return;

              var prev = timeline.scrollLeft;
              var maxScroll = timeline.scrollWidth - timeline.clientWidth;
              if (maxScroll <= 0) return;

              var next = Math.min(Math.max(prev + delta, 0), maxScroll);
              timeline.scrollLeft = next;

              if (next !== prev) {
                evt.preventDefault();
              }
            },
            { passive: false }
          );
        });
      }

      function init() {
        syncAll();
        bindWheelScroll();
      }

      window.addEventListener('resize', syncAll);
      window.addEventListener('load', init);
      init();
    })();
  </script>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([20, 10], 2);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      maxZoom: 18,
      attribution: '¬© OpenStreetMap, ¬© Carto'
    }).addTo(map);

    var puntos = [
      { coords: [32, 45], texto: "Mesopotamia (Ur)<br>Liras sumerias ceremoniales en templos y corte." },
      { coords: [30, 31], texto: "Egipto (Luxor)<br>Arpas rituales en procesiones y tumbas reales." },
      { coords: [37.9, 23.7], texto: "Grecia (Atenas)<br>Lira y kithara en cert√°menes panhel√©nicos." },
      { coords: [53.3, -6.2], texto: "Irlanda (Dubl√≠n)<br>Bardos y harpas c√©lticas narrando genealog√≠as." },
      { coords: [64.1, -21.9], texto: "Islandia (Reikiavik)<br>Sagas n√≥rdicas con liras y tagelharpas." },
      { coords: [34.3, 108.9], texto: "China (Xi'an)<br>Guqin y guzheng en academias confucianas." },
      { coords: [48.8, 2.3], texto: "Par√≠s, Francia<br>Monasterios copian tratados y afinaciones medievales." },
      { coords: [43.7, 10.4], texto: "Italia (Cremona)<br>Stradivari, Amati y Guarneri perfeccionan violines." },
      { coords: [43.8, 11.3], texto: "Florencia, Italia<br>La√∫d renacentista y mecenazgo cortesano." },
      { coords: [41.9, 12.5], texto: "Roma / Vaticano<br>Arpas y violas en liturgia cristiana." },
      { coords: [37.4, -5.9], texto: "Espa√±a (Andaluc√≠a)<br>Guitarra barroca, flamenca y rom√°ntica." },
      { coords: [28.6, 77.2], texto: "India (Delhi)<br>Veena y sitar en tradiciones hind√∫es y mogolas." },
      { coords: [35.0, 135.7], texto: "Jap√≥n (Kioto)<br>Koto, biwa y shamisen en gagaku y kabuki." },
      { coords: [13.5, -15.6], texto: "√Åfrica Occidental<br>Kora y ngoni de los griots mandingas." },
      { coords: [17, -3], texto: "Mal√≠ (Timbukt√∫)<br>&quot;Blues del desierto&quot; y linajes griot." },
      { coords: [32.1, 34.8], texto: "Tradici√≥n jud√≠a (Tel Aviv)<br>Klezmer y violinistas de la di√°spora." },
      { coords: [40.7, -74], texto: "Estados Unidos (Nueva York)<br>Electrificaci√≥n: guitarra y bajo revolucionan el siglo XX." },
      { coords: [51.5, -0.1], texto: "Reino Unido (Londres)<br>Rock, folk revival y violinistas contempor√°neos." }
    ];

    puntos.forEach(function(p) {
      L.marker(p.coords).addTo(map).bindPopup(p.texto);
    });
  </script>
</body>
</html>
